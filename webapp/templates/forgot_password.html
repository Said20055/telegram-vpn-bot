{% extends "base.html" %}

{% block content %}
<div class="container d-flex align-items-center justify-content-center glass-container" style="min-height: 80vh;">
    <div class="col-12 col-md-5 col-lg-4">
        
        <div class="card glass-card p-4 text-white">
            <div class="card-body">
                <h3 class="text-center fw-bold mb-3">Сброс пароля</h3>
                <p class="text-center text-gray small mb-4">Введите ваш Email, и мы пришлем код подтверждения.</p>
                
                {% if error %}
                    <div class="alert alert-danger py-2 mb-3 text-center" style="background: rgba(220, 53, 69, 0.2); border: 1px solid #dc3545; color: #ffb3b9;">
                        {{ error }}
                    </div>
                {% endif %}
                
                <!-- Добавили ID форме: id="resetForm" -->
                <form action="/forgot-password" method="post" id="resetForm">
                    <div class="mb-4">
                        <label class="form-label text-gray ps-1">Email</label>
                        <input type="email" name="email" class="form-control" placeholder="name@example.com" required
                               style="background: rgba(0,0,0,0.3); border-color: rgba(255,255,255,0.1); color: white;">
                    </div>
                    
                    <!-- Обновили кнопку: добавили ID и обернули текст/иконку -->
                    <button type="submit" id="submitBtn" class="btn btn-orange w-100 py-2 fw-bold shadow-sm">
                        <span id="btnText">Отправить код</span> 
                        <i id="btnIcon" class="fas fa-paper-plane ms-2"></i>
                    </button>
                </form>
                
                <div class="mt-4 text-center">
                    <a href="/login" class="text-muted text-decoration-none hover-effect small">
                        <i class="fas fa-arrow-left me-1"></i> Назад ко входу
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Скрипт для индикатора загрузки -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const form = document.getElementById('resetForm');
        const btn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btnText');
        const btnIcon = document.getElementById('btnIcon');

        if(form) {
            form.addEventListener('submit', function() {
                // 1. Блокируем кнопку, чтобы не нажали дважды
                btn.disabled = true;
                
                // 2. Меняем текст
                btnText.innerText = "Отправляем...";
                
                // 3. Меняем иконку самолетика на спиннер (крутилку)
                btnIcon.className = "spinner-border spinner-border-sm ms-2";
                btnIcon.setAttribute("role", "status");
                btnIcon.setAttribute("aria-hidden", "true");
            });
        }
    });
</script>
{% endblock %}